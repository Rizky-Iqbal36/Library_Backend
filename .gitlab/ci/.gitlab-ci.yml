image: docker:18.09

stages:
  - build
  - test

variables:
  DOCKER_HOST: tcp://docker:2375/
  DOCKER_DRIVER: overlay2
  DOCKER_TLS_CERTDIR: ''

services:
  - docker:18.09-dind

before_script:
  - docker info
  - apt-get update
  - echo y | apt-get upgrade
  - echo y | apt-get install curl
  - curl -sL https://deb.nodesource.com/setup_12.x | bash
  - apt-get install nodejs
  - node -v && npm -v

include:
  - local: '.gitlab/ci/build-stage.gitlab-ci.yml'
  - local: '.gitlab/ci/test-stage.gitlab-ci.yml'
